<!DOCTYPE html>
<html>
<head>
    <title>Video Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #1a1a1a; color: white; }
        video { width: 100%; max-width: 800px; margin: 20px 0; }
        .test { margin: 20px 0; padding: 15px; border: 1px solid #333; border-radius: 8px; }
        .success { border-color: #4CAF50; background: rgba(76, 175, 80, 0.1); }
        .error { border-color: #f44336; background: rgba(244, 67, 54, 0.1); }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; margin: 5px; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>Video Debug Test</h1>
    
    <div class="test">
        <h3>Test 1: Small Demo Video (332KB)</h3>
        <video id="video1" controls muted>
            <source src="/demo-video.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div id="status1"></div>
        <button onclick="testVideo('video1', 'status1')">Test Play</button>
    </div>
    
    <div class="test">
        <h3>Test 2: Test Video (191KB)</h3>
        <video id="video2" controls muted>
            <source src="/test-video.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div id="status2"></div>
        <button onclick="testVideo('video2', 'status2')">Test Play</button>
    </div>
    
    <div class="test">
        <h3>Test 3: Large Demo Video (52MB)</h3>
        <video id="video3" controls muted>
            <source src="/TP_Audience_Agent_Demo_925.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div id="status3"></div>
        <button onclick="testVideo('video3', 'status3')">Test Play</button>
    </div>
    
    <div class="test">
        <h3>File Access Test</h3>
        <div id="fileTest"></div>
        <button onclick="testFileAccess()">Test File Access</button>
    </div>

    <script>
        function testVideo(videoId, statusId) {
            const video = document.getElementById(videoId);
            const status = document.getElementById(statusId);
            
            video.addEventListener('loadstart', () => {
                status.innerHTML = '<span style="color: yellow;">Loading...</span>';
            });
            
            video.addEventListener('canplay', () => {
                status.innerHTML = '<span style="color: green;">✓ Can play</span>';
            });
            
            video.addEventListener('play', () => {
                status.innerHTML = '<span style="color: green;">✓ Playing</span>';
            });
            
            video.addEventListener('error', (e) => {
                status.innerHTML = '<span style="color: red;">✗ Error: ' + (e.target.error ? e.target.error.message : 'Unknown error') + '</span>';
            });
            
            video.play().then(() => {
                status.innerHTML = '<span style="color: green;">✓ Autoplay successful</span>';
            }).catch((error) => {
                status.innerHTML = '<span style="color: orange;">⚠ Autoplay failed: ' + error.message + '</span>';
            });
        }
        
        function testFileAccess() {
            const files = ['/demo-video.mp4', '/test-video.mp4', '/TP_Audience_Agent_Demo_925.mp4'];
            const status = document.getElementById('fileTest');
            status.innerHTML = 'Testing file access...';
            
            files.forEach(file => {
                fetch(file)
                    .then(response => {
                        if (response.ok) {
                            status.innerHTML += `<br><span style="color: green;">✓ ${file} - ${response.status} ${response.statusText}</span>`;
                        } else {
                            status.innerHTML += `<br><span style="color: red;">✗ ${file} - ${response.status} ${response.statusText}</span>`;
                        }
                    })
                    .catch(error => {
                        status.innerHTML += `<br><span style="color: red;">✗ ${file} - Error: ${error.message}</span>`;
                    });
            });
        }
        
        // Auto-test on load
        window.onload = function() {
            testFileAccess();
        };
    </script>
</body>
</html>
